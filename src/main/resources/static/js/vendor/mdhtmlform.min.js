(function(){var t;function o(t){var o,r,l,e,n;this.objMd=t,this.group=$(this.objMd).data(this.dataGroup),null!=this.group&&(this.selHtml=this.selHtml+"[data-"+this.dataGroup+"="+this.group+"]",this.selMd=this.selMd+"[data-"+this.dataGroup+"="+this.group+"]"),this.md=$(this.objMd).val(),"oninput"in(o=$(this.objMd))[0]?o[0].addEventListener("input",(l=this,function(){return l.updateMdToHtml()}),!1):o.on("keyup paste",(r=this,function(){setTimeout(function(){return r.updateMdToHtml()},0)})),$("textarea"+this.selHtml).bind("keyup",(e=this,function(t){return e.updateHtmlToMd(!1)})),$(this.selHtml).bind("hallomodified",(n=this,function(t,o){return n.updateHtmlToMd(!0)})),this.updateMdToHtml()}window.MdHtmlForm=(o.prototype.form=null,o.prototype.html="",o.prototype.md="",o.prototype.objMd=null,o.prototype.group="",o.prototype.dataGroup="mdhtmlform-group",o.prototype.selHtml=".mdhtmlform-html",o.prototype.selMd=".mdhtmlform-md",o.prototype.updateMdToHtml=function(){return this.md=$(this.objMd).val(),this.convertMdToHtml(),this.render(!1)},o.prototype.updateHtmlToMd=function(t){return null!=$("div"+this.selHtml).hallo?this.html=$("div"+this.selHtml).html():this.html=$("textarea"+this.selHtml).val(),this.convertHtmlToMd(),this.render(t)},o.prototype.convertMdToHtml=function(){var t;return window.hasOwnProperty("showdown")?(t=new showdown.Converter,this.html=t.makeHtml(this.md)):console.log("Error: mdhtmlform: Showdown not properly included")},o.prototype.convertHtmlToMd=function(){return window.hasOwnProperty("toMarkdown")?this.md=toMarkdown(this.html):console.log("Error: mdhtmlform: to-markdown not properly included")},o.prototype.render=function(t){return null!=$("div"+this.selHtml).hallo&&t||$("div"+this.selHtml).html(this.html),$(this.objMd).val(this.md),$("textarea"+this.selHtml).val(this.html)},t=o),$(function(){return $(".mdhtmlform-md").each(function(){return new t(this)})})}).call(this);